## 数据类型

### 前言

在了解数据类型之前，我们需要了解几个基本的命令:

|命令|描述|
|---|---|
|KEYS `pattern`|获得符合规则的键名列表|
|SET foo bar|设置一个键|
|GET foo|获取一个键|
|EXISTS foo|判断一个键是否存在|
|DEL foo|删除一个键|
|TYPE foo|获得键的数据类型|

#### glob风格通配符规则
`KEYS`命令后的模式`pattern`支持glob风格通配符格式，具体规则如表:

|符号|含义|
|---|---|
|?|匹配一个字符|
|*|匹配任意个(包括0个)字符|
|[]|匹配括号键的任一字符，可以使用"-"符号表示范围，如a[b-d]|
|\x|匹配字符x，用于转义符号，比如匹配"?"则为\?|

#### 实现批量删除

`DEL`命令不支持通配符，但我们可以结合Linux管道和`xargs`命令实现批量删除，如:
```bash
redis-cli KEYS "user:*" | xargs redis-cli DEL
```
注意:

redis是单线程架构，如果redis包含了大量的键，执行keys命令可能会造成redis阻塞，所以一般建议不要在生产环境下使用keys命令。

如果非要遍历键删除的话，可以在以下三种情况使用:
- 在一个不对外提供服务的Redis从节点上执行，这样不会阻塞到客户端的请求，但是会影响到主从复制。
- 如果确认键值总数确实比较少，可以执行该命令。
- 使用scan命令渐进式的遍历所有键，可以有效防止阻塞。

关于这块详细可以参考: [redis如何实现批量删除key功能][1]

#### Redis的数据类型
Redis的数据类型有以下几种:
- 字符串类型(string)
- 散列类型(hash)
- 列表类型(list)
- 集合类型(set)
- 有序集合类型(zset)

### 字符串类型(string)

字符串类型可以存储任何形式的字符串，包括二进制数据，JSON化对象。

一个字符串类型键允许存储的数据最大容量是512M。

字符串类型键相关的命令:

|命令|描述|
|---|---|
|INCR|当存储的是整数形式时, 使键自增|
|INCRBY|当存储的是整数形式时, 使键增加指定整数|
|DECR|当存储的是整数形式时, 使键自减|
|DECRBY|当存储的是整数形式时, 使键减少指定整数|
|APPEND|向尾部追加值|
|STRLEN|获取字符串长度|
|MGET|批量同时获取多个键|
|MSET|批量同时设置多个键|
|GETBIT `key` `offset`|获取字符串某位的二进制值|
|SETBIT `key` `offset` `value`|设置字符串某位的二进制值|
|BITCOUNT `key`|获得字符串类型键中二进制位值是1的位个数|
|BITOP [AND/OR/XOR/NOT] destkey key [key...]|对一个或多个保存二进制位的字符串 key 进行位元操作，并将结果保存到 destkey 上。|

### 散列类型

### 列表类型

### 集合类型

### 有序集合类型

[1]: https://www.jianshu.com/p/2768bd3278d9 "redis如何实现批量删除key功能"
